# Лабораторная работа №7  
## Архитектура, слои и DDD-lite

В данной лабораторной работе реализована упрощённая система оплаты заказа с использованием слоистой архитектуры и принципов DDD-lite.

## Структура проекта

Проект разделён на логические слои:

- **domain/**  
  Доменная модель и бизнес-правила:
  - `Order`, `OrderLine` — сущности заказа  
  - `Money` — value object для работы с суммами  
  - `OrderStatus` — состояние заказа  
  Реализованы доменные инварианты:
  - нельзя оплатить пустой заказ  
  - нельзя оплатить заказ повторно  
  - после оплаты заказ нельзя изменять  
  - итоговая сумма равна сумме строк заказа  

- **application/**  
  Use-case и интерфейсы:
  - `PayOrderUseCase` — сценарий оплаты заказа  
  - `OrderRepository`, `PaymentGateway` — интерфейсы (ports)

- **infrastructure/**  
  Инфраструктурные реализации:
  - `InMemoryOrderRepository` — хранилище заказов в памяти  
  - `FakePaymentGateway` — имитация платёжного сервиса  

- **test/**  
  Unit-тесты use-case без базы данных:
  - успешная оплата заказа  
  - ошибка при оплате пустого заказа  
  - ошибка при повторной оплате  
  - запрет изменения заказа после оплаты  
  - корректный расчёт итоговой суммы  

## Проверка работоспособности

Для проверки работы лабораторной используется запуск unit-тестов:

```bash
python -m pytest -q
